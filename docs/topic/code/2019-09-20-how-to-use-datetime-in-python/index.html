<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="../../../fonts/academicons-1.8.6/css/academicons.min.css"/>
    <link rel="icon" type="image/png" sizes="32x32" href="../../../img/logo.png"> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    
    
    
    <title>Python 日期和时间函数使用指南 - Steven Shen | 沈维燕</title> 
    <meta property="og:title" content="Python 日期和时间函数使用指南 - Steven Shen | 沈维燕">
    

    
      
    

    

    
  
    <link rel="stylesheet" href="https://shen.bioinit.com/css/style.css"/>
    <link rel="stylesheet" href="https://shen.bioinit.com/css/fonts.css"/>
    

<link rel="stylesheet" href="https://shen.bioinit.com/css/custom.css" />

  </head>

  
  <body class="topic">
    
    
    <header class="intro-and-nav" role="banner">
    <div>
      <div class="intro">
        <a class="logo" href="../../../" aria-label="Steven Shen | 沈维燕 home page">
          <img src="https://shen.bioinit.com/img/logo.png" alt="">
        </a>
        <p class="library-desc">
          
            Welcome to the blog site of Steven Shen.
          
        </p>
      </div>
      <nav id="patterns-nav" class="patterns" role="navigation">
        <h2 class="vh">Main navigation</h2>
        <button id="menu-button" aria-expanded="false">
          
          Menu
        </button>
        
        <ul id="patterns-list">
          
          <li class="pattern">
          
          
          
          
            <a href="../../../" >
              
              首页
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../topic/bioinfo/" >
              
              生信
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../topic/tools/" >
              
              工具
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../topic/devel/" >
              
              开发
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../topic/devops/" >
              
              运维
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../topic/code/" >
              
              编程
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../topic/life/" >
              
              生活
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../topic/read/" >
              
              读书
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../topic/hello/" >
              
              乱弹
            </a>
          </li>
          
          <li class="pattern">
          
          
          
          
            <a href="../../../archives/" >
              
              归档
            </a>
          </li>
          
          

<li class="pattern">&nbsp;&nbsp;</li>



<li class="pattern"><a href="https://github.com/shenweiyan/shen.bioinit.com/edit/master/content/topic/code/2019-09-20-how-to-use-datetime-in-python.md" target="_blank">编辑</a></li>


<li class="pattern"><a href="../../../topic/index.xml" type="application/rss+xml" title="RSS feed">订阅</a></li>

<li class="pattern"><a href="../../../declare/" title="声明">声明</a></li>


        </ul>
      </nav>
    </div>
    </header>

    <article class="main">
      <header class="title">
        

<h1>Python 日期和时间函数使用指南</h1>



<h3>
2019-09-20</h3> 


   
  


      </header>




<p>作者： [Deepanshu Bhalla](<a href="https://www.linkedin.com/in/deepa ">https://www.linkedin.com/in/deepa </a>    <br />编译： [Steven Shen](<a href="https://www.yuque.com/ ">https://www.yuque.com/ </a>     <br />标题： <a href="https://www.listendata.com/2019/07/how-to-use-datetime-in-python.html">A Complete Guide to Date and Time Functions</a></p>

<hr />

<p>在本教程中，我们将介绍 python 的 <code>datetime</code> 模块以及如何使用它来处理日期、时间，以及日期时间的格式化处理。 它包含各种实用示例，可帮助您通过 python 函数更加快捷高效进行日期和时间处理。 一般来说，日期类型列不容易操作，因为它带来很多挑战，例如处理闰年，一个月中的不同天数，不同的日期和时间格式，或者日期值是否以字符串（字符）格式存储等等。</p>

<h3 id="1-datatime-模块">1. datatime 模块</h3>

<p>它是一个 python 模块，它提供了几个处理日期和时间的函数。它有以下四个类，在本文的后半部分将解释这些类是如何工作的。</p>

<ol>
<li>datetime</li>
<li>date</li>
<li>time</li>
<li>timedelta</li>
</ol>

<p>没有使用真实数据集经验的人可能没有遇到 date columns。在他们的印象中可能会觉得使用日期的机会很少而且不那么重要。为了启发他们，我列出了现实世界的例子，其中使用 <code>datetime</code> 模块的好处可能是非常明显的。</p>

<ol>
<li>选择 2018 年 6 月 30 日活跃的所有储蓄账户持有人，并检查他们的状态是否仍然有效；</li>
<li>确定在过去 3 个月内提交超过 20 件索赔的被保险人；</li>
<li>识别在过去 6 个月内进行多笔交易的客户；</li>
<li>从时间戳值中提取日期。</li>
</ol>

<h4 id="导入-datetime-模块">导入 <code>datetime</code> 模块</h4>

<p>您可以使用以下命令导入或加载 <code>datetime</code> 模块：</p>

<pre><code class="language-python">import datetime
</code></pre>

<p>您不需要安装此模块，因为它与 python 软件的安装捆绑在一起。</p>

<h3 id="2-dates">2. Dates</h3>

<p>这里我们使用 <code>datetime.date</code> 类来表示日历日期值。 <code>today()</code> 方法用于获取当前日期。</p>

<pre><code class="language-python">&gt;&gt;&gt; import datetime
&gt;&gt;&gt; datetime.date.today()
datetime.date(2019, 9, 10)
</code></pre>

<p>为了将其显示为正确的日历日期，我们可以将其包装在 <code>print()</code> 命令中。</p>

<pre><code class="language-python">&gt;&gt;&gt; print(datetime.date.today())
2019-09-10
</code></pre>

<h4 id="2-1-创建-date-对象">2.1 创建 Date 对象</h4>

<p>日期类遵循如下所示的语法：<code>**date(year, month, day)**</code></p>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.date(2019, 10, 20)
&gt;&gt;&gt; print(dt)
2019-10-20
</code></pre>

<h4 id="2-2-从-date-值中提取-day-month-和-year">2.2 从 date 值中提取 day, month 和 year </h4>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.date(2019, 10, 20)
&gt;&gt;&gt; dt.day
20
&gt;&gt;&gt; dt.month
10
&gt;&gt;&gt; dt.year
2019
</code></pre>

<h4 id="2-3-自定义日期格式">2.3 自定义日期格式</h4>

<p>您可以使用 <code>strftime</code> 方法定义日期格式来自定义日期格式。它将日期对象转换为字符串。</p>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.date(2019, 10, 20)
&gt;&gt;&gt; print(dt)
2019-10-20
&gt;&gt;&gt; dt.strftime(&quot;%d-%m-%Y&quot;)
'20-10-2019'
</code></pre>

<p><code>%d</code> 指的是一个月中的某一天。在 <code>20-10-2019</code> 中， <code>%d</code>  返回 20。<br /><code>%m</code> 指的是一年中的某个月。在 <code>20-10-2019</code> 中， <code>%m</code> 返回 10。<br /><code>%Y</code> 指的是年。字母 <strong>&lsquo;Y&rsquo;</strong> 是大写的。在 <code>20-10-2019</code> 中，<code>%Y</code> 返回 2019 年。<br /><code>%y</code> 指的是两位数格式的年份。在 <code>20-10-2019</code> 中，<code>%y</code> 返回 19。</p>

<p><strong>其他流行的格式代码：</strong><br /><code>%a</code> 返回工作日的前三个字母，如 <code>Sun</code> ；<br /><code>%A</code> 返回工作日的完整名称，如 <code>Sunday</code>；<br /><code>%b</code> 返回月份的前三个字母，如 <code>Oct</code> ；<br /><code>%B</code> 返回月份的完整名称，如 <code>October</code> ；</p>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.date(2019, 10, 20)
&gt;&gt;&gt; dt.strftime(&quot;%d/%m/%Y&quot;)
'20/10/2019'

&gt;&gt;&gt; dt.strftime(&quot;%b %d, %Y&quot;)
'Oct 20, 2019'

&gt;&gt;&gt; dt.strftime(&quot;%B %d, %Y&quot;)
'October 20, 2019'

&gt;&gt;&gt; dt.strftime(&quot;%a %B %d, %Y&quot;)
'Sun October 20, 2019'

&gt;&gt;&gt; dt.strftime(&quot;%A %B %d, %Y&quot;)
'Sunday October 20, 2019'

&gt;&gt;&gt; dt.strftime(&quot;%A, %B %d, %Y&quot;)
'Sunday, October 20, 2019'
</code></pre>

<h3 id="3-time">3. Time</h3>

<p>时间值使用 <code>datetime.time</code> 类定义。它遵循如下所示的语法：<br /><code>_datetime.time(hour, minute, second, mi_</code> </p>

<pre><code class="language-python">&gt;&gt;&gt; t = datetime.time(21, 2, 3)
&gt;&gt;&gt; print(t)
21:02:03
</code></pre>

<h4 id="3-1-从时间值获取小时-分钟和秒">3.1 从时间值获取小时，分钟和秒</h4>

<pre><code class="language-python">&gt;&gt;&gt; t = datetime.time(21, 2, 3)
&gt;&gt;&gt; t.hour
21
&gt;&gt;&gt; t.minute
2
&gt;&gt;&gt; t.second
3
&gt;&gt;&gt; t.microsecond
0
</code></pre>

<h4 id="3-2-将时间转换为-am-pm-格式">3.2 将时间转换为 AM PM 格式</h4>

<ul>
<li><code>%I</code> 将 24 小时时间格式转换为 12 小时格式。</li>
<li><code>%p</code> 根据时间值返回 AM PM。</li>
<li><code>%H</code> 返回时间值的小时数。</li>
<li><code>%M</code> 返回时间值的分钟数。</li>
<li><code>%S</code> 返回时间值的秒数。</li>
</ul>

<pre><code class="language-python">&gt;&gt;&gt; t = datetime.time(21, 2, 3)
&gt;&gt;&gt; print(t)
21:02:03
&gt;&gt;&gt; t.strftime(&quot;%I:%M %p&quot;)
'09:02 PM'
</code></pre>

<h3 id="4-同时处理-dates-和-time">4. 同时处理 Dates 和 Time</h3>

<p><code>datetime</code>  库有另一个名为 <code>datetime.datetime</code> 的类，用于表示日期加时间。你可以称之为时间戳。 <code>now()</code> 或 <code>today()</code> 方法的 <code>datetime</code> 类用于提取当前日期和时间。</p>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.datetime.now()
&gt;&gt;&gt; print(dt)
2019-09-10 10:45:46.941261
</code></pre>

<p><code>%c</code> 表示当地的日期和时间。<code>%X</code> 表示当地的时间。</p>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.datetime.now()
&gt;&gt;&gt; print(dt)
2019-09-10 10:45:46.941261

&gt;&gt;&gt; dt.strftime(&quot;%c&quot;)
'Tue Sep 10 10:45:46 2019'

&gt;&gt;&gt; dt.strftime(&quot;%A %B %d %X&quot;)
'Tuesday September 10 10:45:46'

&gt;&gt;&gt; dt.strftime(&quot;%A %B %d %H:%M&quot;)
'Tuesday September 10 10:45'
</code></pre>

<h4 id="4-1-创建-datetime-对象">4.1 创建 datetime 对象</h4>

<p><code>datetime</code> 类的语法如下：<br /><code>_datetime(year, month, day, hour, minute, second, m_</code> </p>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.datetime(2019, 7, 20, 10, 51, 0)
&gt;&gt;&gt; print(dt)
2019-07-20 10:51:00
        
&gt;&gt;&gt; dt.strftime('%d-%m-%Y %H-%M')
'20-07-2019 10-51'
</code></pre>

<h4 id="4-2-在-python-中将字符串转换为-datetime">4.2 在 python 中将字符串转换为 datetime</h4>

<pre><code class="language-python">&gt;&gt;&gt; from dateutil.parser import parse
&gt;&gt;&gt; print(parse('March 01, 2019'))
2019-03-01 00:00:00
</code></pre>

<h3 id="5-如何获取当前的时间">5. 如何获取当前的时间？</h3>

<p>我们可以使用我们在上一节中使用的相同函数，并使用 <code>time()</code> 方法从返回值中提取时间。</p>

<pre><code class="language-python">print(dt.time())
</code></pre>

<h3 id="6-如何获得当前周的天">6. 如何获得当前周的天？</h3>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.datetime.now()
&gt;&gt;&gt; print(dt)
2019-09-10 10:58:10.044233
&gt;&gt;&gt; dt.strftime(&quot;%A %B %d %H:%M&quot;)
'Tuesday September 10 10:58'

&gt;&gt;&gt; dt.i
2
</code></pre>

<h3 id="7-计算未来或过去的日期">7. 计算未来或过去的日期</h3>

<p>通过使用 <code>timedelta</code> ，您可以添加或减去天，周，小时，分钟，秒，微秒和毫秒。当您想要计算未来或过去的日期时，它非常有用。假设您要求识别过去 30 天内注册产品的所有客户。要解决此问题，您需要计算今天日期之前 30 天的日期。</p>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.datetime.now()
&gt;&gt;&gt; print(dt)
2019-09-10 11:01:54.959386

#30 days ahead
&gt;&gt;&gt; delta = datetime.timedelta(days=30)
&gt;&gt;&gt; print(dt + delta)
2019-10-10 11:01:54.959386
        
#30 days back
&gt;&gt;&gt; print(dt - delta)
2019-08-11 11:01:54.959386
        
&gt;&gt;&gt; delta = datetime.timedelta(days= 10, hours=3, minutes=30, seconds=30)
&gt;&gt;&gt; print(dt + delta)
2019-09-20 14:32:24.959386

&gt;&gt;&gt; delta = datetime.timedelta(weeks= 4, hours=3, minutes=30, seconds=30)
&gt;&gt;&gt; print(dt + delta)
2019-10-08 14:32:24.959386        
</code></pre>

<p>在 <code>timedelta</code> 中，缺少月份和年份选项，这意味着您无法按月（s）或年（s）计算未来日期增量。要完成此任务，我们可以使用 <code>dateutil</code> 包。让我们通过提交以下代码来导入此包：</p>

<pre><code class="language-python">from dateutil.relativedelta import *
</code></pre>

<p>如果 <code>dateutil</code> 包未安装在您的系统上，请通过运行此命令 <code>pip install python-dateutil</code> 来安装它。</p>

<pre><code class="language-python">&gt;&gt;&gt; from dateutil.relativedelta import *
&gt;&gt;&gt; dt = datetime.datetime(2019, 7, 20, 10, 51, 0)
&gt;&gt;&gt; print(dt)
2019-07-20 10:51:00
        
#1 Month ahead        
&gt;&gt;&gt; print(dt + relativedelta(months=+1))
2019-08-20 10:51:00

#1 Month Back
&gt;&gt;&gt; print(dt + relativedelta(months=-1))
2019-06-20 10:51:00
</code></pre>

<p>如果您想知道这个 <code>relativedelta(months = + 1)</code> 与 <code>datetime.timedelta(days = 30)</code> 有何不同，请观察两个命令的返回值（结果）。</p>

<p>由于 7 月有 31 天，提前 30 天使用此 <code>datetime.timedelta(days=30)</code> 返回 2019-08-19 10:51:00。 <code>relativedelta(months=+1)</code> 返回 2019-08-20 10:51:00 这是一个完整的 1 个月。</p>

<pre><code class="language-python">#Next month, plus one week
&gt;&gt;&gt; print(dt + relativedelta(months=+1, weeks=+1))
2019-08-27 10:51:00

#Next Year        
&gt;&gt;&gt; print(dt + relativedelta(years=+1))
2020-07-20 10:51:00
</code></pre>

<h4 id="7-1-考虑闰年">7.1 考虑闰年</h4>

<p><br />来自 <code>dateutil</code> 包的 <code>relativedelta</code> 方法在计算未来或过去日期时会同时考虑闰年的情况。2000 年是闰年，所以 2 月份有 29 天；但明年 2 月只有 28 天。</p>

<pre><code class="language-python">&gt;&gt;&gt; print(datetime.date(2000, 2, 29)+ relativedelta(years=+1))
2001-02-28
</code></pre>

<h3 id="8-两个日期之间的差异">8. 两个日期之间的差异</h3>

<p>假设您需要计算两个日期之间的天数。当您需要计算特定信息客户的使用期限时，即当他们开立账户（开始日期）和账户关闭时（结束日期）时，这是一个非常常见的数据问题陈述。</p>

<pre><code class="language-python">&gt;&gt;&gt; date1 = datetime.date(2020, 10, 25)
&gt;&gt;&gt; date2 = datetime.date(2019, 12, 25)
&gt;&gt;&gt; diff = date1- date2
&gt;&gt;&gt; diff.days
305
</code></pre>

<h4 id="8-1-如何计算两个日期之间的月数">8.1 如何计算两个日期之间的月数</h4>

<p>一种方法是计算天数，然后除以 30 得到月数。但它并不总是正确的，因为有些月份有 31 天。<br /><img src="https://qiniu.bioinit.com/yuque/0/2019/png/126032/1568085011856-f1944dbf-86b7-46f2-8b07-e25101a3e496.png#align=left&amp;display=inline&amp;height=175&amp;name=image.png&amp;originHeight=175&amp;originWidth=857&amp;size=11214&amp;status=done&amp;width=857" alt="image.png" /></p>

<p><strong>它是怎么起作用的呢？</strong></p>

<ul>
<li>date1.month - date2.month returns -2</li>
<li>12*(date1.year - date2.year) returns 12</li>
<li>-2 + 12 = 10</li>
</ul>

<p><strong>注意：</strong> <br />假设您要计算 31/10/2018 和 01/11/2018 之间的月数，上面建议的方法将返回 1，因为两个日期位于月差异中。您可能会发现它不正确，因为两个日期之间的天数是1。您是否知道 SAS 软件中的 INTCK 功能（默认设置）也会返回1？ 返回 1 的用法是什么？ 当您需要将时间序列数据排序到箱中时，它非常有用。例如，每日数据可以累积到月度数据，以作为月度系列进行处理。如果您希望 0 作为月数，则可以使用上面“_Not full-proof Solution_”下面显示的代码。</p>

<h3 id="9-如何使用-pandas-数据框上的日期">9. 如何使用 pandas 数据框上的日期？</h3>

<p>在现实世界中，我们通常从外部文件导入数据并将其存储在 pandas DataFrame 中。因此，了解我们如何在 DataFrame 上执行日期和时间操作非常重要。让我们创建一个示例数据框用于说明目的。</p>

<pre><code class="language-python">&gt;&gt;&gt; import pandas as pd
&gt;&gt;&gt; df = pd.DataFrame({&quot;A&quot;:[&quot;2019-01-01&quot;, &quot;2019-05-03&quot;, &quot;2019-07-03&quot;],
                       &quot;B&quot;:[&quot;2019-03-02&quot;, &quot;2019-08-01&quot;, &quot;2019-10-01&quot;] })

# Let's check the column types.
&gt;&gt;&gt; df.dtypes
A    object
B    object
dtype: object
</code></pre>

<p>可以看到，这里的 A 列和 B 列都是字符串（character values）。由于这些变量存储在字符串中，因此需要将列转换为 <code>datetime</code> 对象。</p>

<pre><code class="language-python">&gt;&gt;&gt; df['A'] = pd.to_datetime(df['A'])
&gt;&gt;&gt; df['B'] = pd.to_datetime(df['B'])
&gt;&gt;&gt; df.dtypes
A    datetime64[ns]
B    datetime64[ns]
dtype: object
</code></pre>

<p>为了计算在 pandas dataframe 上使用 A 列和 B 列的天数，您只需要对这两列进行计算。</p>

<pre><code class="language-python">&gt;&gt;&gt; df['C'] = df['B'] - df['A']
&gt;&gt;&gt; df
           A          B       C
0 2019-01-01 2019-03-02 60 days
1 2019-05-03 2019-08-01 90 days
2 2019-07-03 2019-10-01 90 days
</code></pre>

<p>我们计算的 C 列采用日期时间格式。为了获得整数格式的差值，您可以提交以下命令。 <code>dt</code> 可以让 pandas 使用 <code>datetime</code> 方法。</p>

<pre><code class="language-python">&gt;&gt;&gt; df['C'] = (df['B'] - df['A']).dt.days
&gt;&gt;&gt; df
           A          B   C
0 2019-01-01 2019-03-02  60
1 2019-05-03 2019-08-01  90
2 2019-07-03 2019-10-01  90
</code></pre>

<h4 id="9-1-获取过去-3-个月的日期">9.1 获取过去 3 个月的日期</h4>

<p>纯粹的 pythonic 方法是在 lambda 中定义函数，它在所有行上运行。</p>

<pre><code class="language-python">&gt;&gt;&gt; from dateutil.relativedelta import *
&gt;&gt;&gt; df['D'] = df[&quot;B&quot;].apply(lambda x: x - relativedelta(months=3))
&gt;&gt;&gt; df
           A          B   C          D
0 2019-01-01 2019-03-02  60 2018-12-02
1 2019-05-03 2019-08-01  90 2019-05-01
2 2019-07-03 2019-10-01  90 2019-07-01
</code></pre>

<p>另一种方法是使用 <code>pandas</code> 包的内置函数 <code>DateOffset</code> ，它可以增加或减少天，月，年，周，小时，分钟，秒，微秒和纳秒。</p>

<pre><code class="language-python">df['D1'] = df['B'] - pd.DateOffset(months=3)
</code></pre>

<h4 id="9-2-按日期过滤数据框">9.2 按日期过滤数据框</h4>

<p>假设您只想选择列 B 的值大于 2019 年 5 月 1 日的那些行。</p>

<pre><code class="language-python">df[df['B']&gt;datetime.datetime(2019,5,1)]
</code></pre>

<h4 id="9-3-选择两个日期之间的数据">9.3 选择两个日期之间的数据</h4>

<p>假设您要在两个日期之间从 pandas 数据框中选择行（比如 5 月 1 日到 9 月 30 日之间）。</p>

<pre><code class="language-python">df[df.B.between(datetime.datetime(2019,5,1), datetime.datetime(2019,9,30))]

# OR
df[(df['B'] &gt; datetime.datetime(2019,5,1)) &amp; (df['B'] &lt; datetime.datetime(2019,9,30))]
</code></pre>

<h3 id="10-如何使用不同的时区">10. 如何使用不同的时区</h3>

<p>很多时候我们在不同的时区有日期值，我们需要将它转换为我们当地的时区。手动解决这个问题并不容易。在 python 中，有一个名为 <code>pytz</code> 的库用于设置和转换时区。</p>

<p>您可以通过提交此命令找到所有时区。</p>

<pre><code class="language-python">import pytz
pytz.all_timezones
</code></pre>

<p>要在特定时区设置日期时间对象（比如说亚洲/加尔各答），可以使用名为 <code>tzinfo</code> 的参数。</p>

<pre><code class="language-python">dt = datetime.datetime(2019, 7, 20, 10, 10, 0, tzinfo=pytz.timezone('Asia/Kolkata'))
</code></pre>

<p>要将其转换为美国/亚利桑那州时区，我们可以使用名为 <code>astimezone</code> 的方法进行转换。如果你观察到转换后的日期已经改变，是因为这两个时区之间的差异超过 12 小时。</p>

<pre><code class="language-python">&gt;&gt;&gt; dt = datetime.datetime(2019, 7, 20, 10, 10, 0, tzinfo=pytz.timezone('Asia/Kolkata'))
&gt;&gt;&gt; print(dt)
2019-07-20 10:10:00+05:53
            
&gt;&gt;&gt; print(dt.astimezone(pytz.timezone('US/Arizona')))
2019-07-19 21:17:00-07:00
</code></pre>


  <footer>
  
<nav class="post-nav">
  &larr;&nbsp; <span class="nav-prev"><a href="../../../topic/code/2019-09-19-xu2eg5/">Python 文件下载并显示下载进度条</a></span>
  <span class="nav-next"></span> &nbsp;&rarr;
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/topic\/code\/2019-09-19-xu2eg5\/';
    
  } else if (e.which == 39) {  
    
  }
  if (url) window.location = url;
});
</script>



<section class="comments">
  <div id="disqus_thread"></div>
  <script src="../../../js/disqusloader.min.js"></script>
  <script>
  var disqus_config = function () {
  
    this.page.url = "https:\/\/shenweiyan.github.io\/shen.bioinit.com\/" + location.pathname;
  
  };
  (function() {
    var inIFrame = function() {
      var iframe = true;
      try { iframe = window.self !== window.top; } catch (e) {}
      return iframe;
    };
    if (inIFrame()) return;
    var disqus_js = '//shen-bioinit.disqus.com/embed.js';
    var d = document, s = d.createElement('script');
    s.src = disqus_js; s.async = true;
    s.setAttribute('data-timestamp', +new Date());
    var b = false, l = function() {
      if (b) return;
      (d.head || d.body).appendChild(s); b = true;
    }
    var t = d.getElementById('disqus_thread');
    s.onerror = function(e) {
      if (sessionStorage.getItem('failure-note')) return;
      t.innerText = '非常抱歉, 本页面您可能需要翻墙才能发表评论。';
      t.style.border = '1px dashed';
      t.style.padding = '.5em';
      t.style.background = 'lightyellow';
      sessionStorage.setItem('failure-note', true);
    };
    
    if (location.hash.match(/^#comment/)) return l();
    var c = function() {
      if (b) return;
      var rect = t.getBoundingClientRect();
      if (rect.top < window.innerHeight && rect.bottom >= 0) l();
    };
    window.addEventListener('load', c);
    d.addEventListener('scroll', c);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>




<script async src="../../../js/fix-toc.js"></script>

<script async src="../../../js/center-img.js"></script>

<script async src="../../../js/right-quote.js"></script>

<script async src="../../../js/no-highlight.js"></script>

<script async src="../../../js/fix-footnote.js"></script>

<script async src="../../../js/math-code.js"></script>

<script async src="../../../js/external-link.js"></script>

<script async src="../../../js/alt-title.js"></script>

<script async src="../../../js/header-link.js"></script>

<script async src="../../../js/dom-scripts.js"></script>


<script async src="//cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>



  
  
  
  

  <script type="text/javascript" src="//rf.revolvermaps.com/0/0/6.js?i=5m6pzaeh5ar&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=0" async="async"></script>
  </footer>
  </article>
  
  </body>
</html>

